/**
 ******************************************************************************
 * @file           : main.c
 * @author         : MathiYuvarajan
 * @Program          : Basic Led Blinking using GPIO
 *****************************************************************************
 *
 ******************************************************************************
 */

#include <stdint.h>

#if !defined(__SOFT_FP__) && defined(__ARM_FP)
  #warning "FPU is not initialized, but the project is compiling for an FPU. Please initialize the FPU before use."
#endif

#define RCC 0x40023800UL
#define AH1B1_GPIOB_ENR *(volatile uint32_t*)(RCC+0x30U) // AHB1 GPIOB ENR
#define GPIOB 0x40020400UL
#define GPIOB_MODER *(volatile uint32_t*)(GPIOB+0x00U) // GPIOB MODER
#define GPIOB_ODR *(volatile uint32_t*)(GPIOB+0x14U) // GPIOB ODR

int main(void)
{
	// Initialization
	AH1B1_GPIOB_ENR |= (1<<1); // GPIOBLP_ENR

	//Clear the GPIOB MODER Register
	GPIOB_MODER &= ~(3<<26); // 13th PIN so MODER13

	//Set the GPIOB MODER Register
	GPIOB_MODER |= (1<<26);


	GPIOB_ODR &= (1<<13); // Led OFF


	/* Loop forever */
	for(;;){
		GPIOB_ODR ^= (1<<13);

		//Random Delay
		for(uint32_t x=0;x<10000;x++);
	}
}
